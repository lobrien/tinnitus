# Tinnitus Notch Filter

**⚠️ DISCLAIMER: NOT MEDICAL ADVICE**

**This software is provided for educational and experimental purposes only.**

* It is **not** a medical device.
* It is **not** intended to diagnose, treat, cure, or prevent any disease or medical condition, including tinnitus.
* The audio generated by this tool should **not** be used as a substitute for professional medical advice, diagnosis, or treatment.

**Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition.**

**Safety Warning:** High-volume audio can cause permanent hearing damage. Always ensure your volume is set to a safe, low level before playing generated noise. Use this tool at your own risk.

---

An audio tool that generates spectral noise (White, Pink, Brown) with configurable notch filters. For investigation of [acoustic neuromodulation protocols](https://www.pnas.org/doi/10.1073/pnas.0911268107) (e.g., "notched music therapy") to target specific tinnitus frequencies. 

[r/tinnitus](https://www.reddit.com/r/tinnitus)

This video provides a practical demonstration of how notched white noise and neuromodulation tones may be something worth investigating: 

https://www.youtube.com/watch?v=O8ypzXTHi1E

## Features

* **Spectral Noise Generation:** Validated generators for White ($1/f^0$), Pink ($1/f^1$), and Brown ($1/f^2$) noise.
* **Precision Notching:** Configurable center frequency and Q-factor (bandwidth).
* **Verification Analysis:** Integrated spectral analyzer to confirm notch depth in generated or existing audio files.
* **High-Fidelity Output:** Defaults to FLAC (lossless) with float32 processing.

## ⚠️ System Requirements

**External Dependency: FFmpeg**
The `verify` command relies on `ffmpeg` and `ffprobe` to decode audio streams and analyze sample rates. These binaries must be installed and available in your system `$PATH`.

* See [INSTALLATION.md](INSTALLATION.md) for OS-specific setup instructions.

## Quick Start

### Installation

```bash
# Clone the repository
git clone [https://github.com/yourusername/tinnitus.git](https://github.com/yourusername/tinnitus.git)
cd tinnitus

# Install with uv (recommended)
uv pip install -e .
Usage

The package exposes a single CLI entry point tinnitus with two subcommands.

1. Generate Noise

Generate 60 seconds of Pink noise with a notch at 4000 Hz.

Bash
tinnitus generate --freq 4000 --type pink --duration 60 --output therapy.flac
Flag	Description	Default
--freq	Center frequency of the notch (Hz)	Required
--type	Noise color (white, pink, brown)	pink
--width	Q-factor of the notch (~1.414 is 1 octave)	1.414
--output	Output filename (.flac, .wav, .ogg)	output.flac
2. Verify Audio

Analyze an audio file to confirm the notch depth. Requires FFmpeg.

Bash
tinnitus verify therapy.flac --freq 4000 --plot analysis.png
Development
Run the test suite to validate argument parsing, spectral physics, and CLI dispatch.

Bash
uv run pytest
